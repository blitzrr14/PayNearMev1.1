@model PayNearMe.Models.BeneficiaryModel
@{
    ViewBag.Title = "Edit Beneficiary";
}
<html>

<body style="min-width: 590px;">

    <div class="" id="bodySection" style="margin: 0 auto; width: 100%;">

        @using (Html.BeginForm("EditReceiver", "Benefeciary", FormMethod.Post, new { id = "edit-receiver-form" }))
        {
            <div class="page">
                <form action="sessionExpired.action" id="sessionExpired" name="sessionExpired" method="POST"></form>
                <div id="f1_upload_process" style="display: none"></div>

                @Html.HiddenFor(model => model.receiverCustID, Model.receiverCustID)

                <div class="page-body dynamic-pages">
                    <div class="page-desc beneficiaries">
                        <div class="page-title bg-info">
                            <h1> <span class="title__icon">Beneficiaries</span> </h1>
                        </div>

                        <div class="layout-border">
                            <div id="add_newbeneficiarymain" style="">

                                <div class=" step-content step-content__one" id="addbeneficiaryform" style="display: block;">

                                    <div class="add-new-benefi">

                                        <div class="page-title-secondry">
                                            <div class="mar-adjust">
                                                <div class="row">
                                                    <div class="col-md-12 hero-text-title">
                                                        <h2 id="beneHeadingMsg">Edit Benefeciary</h2>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <div id="beneinfoOne" style="display:block">

                                            <div class="beneficiary-information well-lg clearfix">
                                            
                                                <div class="col-md-12">
                                                    <div class="form-group clearfix" id="errorMsgDivContainer" style="display: none;">
                                                        <p class="errorMsgDiv" id="errorMsgDiv"></p>
                                                    </div>
                                                </div>

                                               
                                                @* ------------------N A M E --------------------*@

                                            </div>
                                            <div class="divider light-bg"></div>

                                            <div class="beneficiary-information__sec-two  well-lg form-horizontal clearfix">



                                                <div class="col-md-12 form-group">
                                                    <div class="row">
                                                        <div class="row-custom required-field clearfix">

                                                            <div class="col-sm-2">
                                                                <div class="form-display-table-cell">
                                                                    <label for="">Name</label>
                                                                </div>
                                                            </div>

                                                            <div class="col-sm-3">
                                                                <div class="row">
                                                                    <div class="col-xs-12">
                                                                        <div class="required-field-block form-group has-feedback clearfix  ">
                                                                            @Html.TextBoxFor(model => model.firstName, new { @class = "form-control", @type = "text", id = "firstName", @placeholder = "First Name", @required = "required" })
                                                                            <div class="required-icon" data-original-title="" title=""><div class="text">*</div></div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>

                                                            <div class="col-sm-3">
                                                                <div class="row">
                                                                    <div class="col-xs-12">
                                                                        <div class=" required-field-block form-group clearfix has-feedback required-field">
                                                                            @Html.TextBoxFor(model => model.midlleName, new { @class = "form-control", @type = "text", id = "middleName", @placeholder = "Middle Name" })

                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="col-sm-3">
                                                                <div class="row">
                                                                    <div class="col-xs-12">
                                                                        <div class=" required-field-block form-group clearfix has-feedback required-field">
                                                                            @Html.TextBoxFor(model => model.lastname, new { @class = "form-control", @type = "text", id = "lastName", @placeholder = "Last Name", @required = "required" })
                                                                            <div class="required-icon" data-original-title="" title=""><div class="text">*</div></div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>

                                                        </div>
                                                    </div>


                                                    <div class="row">
                                                        <div class="row-custom required-field clearfix">

                                                            <div class="col-sm-2">
                                                                <div class="form-display-table-cell">
                                                                    <label for="">Address</label>
                                                                </div>
                                                            </div>

                                                            <div class="col-sm-3">
                                                                <div class="row">
                                                                    <div class="col-xs-12">
                                                                        <div class=" required-field-block form-group clearfix has-feedback required-field">
                                                                            @Html.TextBoxFor(model => model.street, new { @class = "form-control", @type = "text", id = "street", @placeholder = "Street", @required = "required" })                                                                            <div class="required-icon" data-original-title="" title=""><div class="text">*</div></div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>

                                                            <div class="col-sm-3">
                                                                <div class="row">
                                                                    <div class="col-xs-12">
                                                                        <div class="required-field-block form-group has-feedback clearfix  ">
                                                                            @Html.TextBoxFor(model => model.city, new { @class = "form-control", @type = "text", id = "city", @placeholder = "City", @required = "required" })
                                                                            <div class="required-icon" data-original-title="" title=""><div class="text">*</div></div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>

                                                            <div class="col-sm-3">
                                                                <div class="row">
                                                                    <div class="col-xs-12">
                                                                        <div class=" required-field-block form-group clearfix has-feedback required-field">
                                                                            @Html.TextBoxFor(model => model.zipcode, new { @class = "form-control", @type = "text", id = "zipcode", @placeholder = "Zip Code", @required = "required" })
                                                                            <div class="required-icon" data-original-title="" title=""><div class="text">*</div></div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                           

                                                        </div>
                                                       
                                                    </div>
                                                    <div class="row">
                                                        <div class="col-sm-3 col-sm-offset-2">
                                                            <div class="row">
                                                                <div class="col-xs-12">
                                                                    <div class=" required-field-block form-group clearfix has-feedback required-field">
                                                                        @Html.TextBoxFor(model => model.country, new { @class = "form-control", @type = "text", id = "country", @placeholder = "Country", @required = "required" })                                                                            <div class="required-icon" data-original-title="" title=""><div class="text">*</div></div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>




                                                    <div class="row">
                                                        <div class="row-custom required-field clearfix">

                                                            <div class="col-sm-2">
                                                                <div class="form-display-table-cell">
                                                                    <label for="">Date Of Birth</label>
                                                                </div>
                                                            </div>

                                                            <div class="col-sm-10">
                                                                <div class="row">
                                                                    <div class="col-xs-4">
                                                                        <div class="required-field-block form-group has-feedback clearfix  ">
                                                                            @Html.TextBoxFor(model => model.dateOfBirth, new { @class = "form-control", @type = "text", id = "dateOfBirth", @placeholder = "mm/dd/yyyy", @required = "required", @maxlength = "10", @minlength = "10" })
                                                                            <div class="required-icon" data-original-title="" title=""><div class="text">*</div></div>
                                                                        </div>
                                                                    </div>
                                                                    @Html.ValidationMessageFor(model => model.dateOfBirth)
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>

                                                    <div class="row">
                                                        <div class="row-custom required-field clearfix">

                                                            <div class="col-sm-2">
                                                                <div class="form-display-table-cell">
                                                                    <label for="">Gender</label>
                                                                </div>
                                                            </div>

                                                            <div class="col-sm-10">
                                                                <div class="row">
                                                                    <div class="col-xs-4">
                                                                        <div class="required-field-block form-group has-feedback clearfix  ">
                                                                            @Html.DropDownListFor(model => model.gender,
                                                                                                new List<SelectListItem>() { new SelectListItem { Value = "", Text = "-- Select --"},
                                                                                                new SelectListItem { Value = "Male", Text = "Male" },
                                                                                                new SelectListItem { Value = "Female", Text = "Female" }},
                                      new { @class = "form-control", @required = "required", @id = "gender" })
                                                                        </div>
                                                                    </div>

                                                                    @Html.ValidationMessageFor(model => model.gender)
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>


                                                    <div class="row">
                                                        <div class="row-custom required-field clearfix">

                                                            <div class="col-sm-2">
                                                                <div class="form-display-table-cell">
                                                                    <label>Relation</label>
                                                                </div>
                                                            </div>

                                                            <div class="col-sm-10">
                                                                <div class="row">
                                                                    <div class="col-xs-4">
                                                                        <div class="required-field-block form-group has-feedback clearfix  ">
                                                                            @Html.TextBoxFor(model => model.relation, new { @class = "form-control", @type = "text", id = "relation", @placeholder = "Relation" })
                                                                            <div class="required-icon" data-original-title="" title=""><div class="text">*</div></div>
                                                                        </div>
                                                                    </div>
                                                                    @Html.ValidationMessageFor(model => model.relation)
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>

                                                    <!--                 Mobile fields -->


                                                    <div class="row">
                                                        <div class="row-custom  clearfix">
                                                            <div class="col-sm-2">
                                                                <div class="form-display-table-cell required-field">
                                                                    <label for="">Phone</label>
                                                                </div>
                                                            </div>
                                                            <div class="col-sm-10 clearfix">
                                                                <div class="row">
                                                                    <div class="col-xs-4 col-sm-4 clearfix">
                                                                        <div class="form-group clearfix">
                                                                            <div class="input-group">
                                                                                <div class="input-group-addon has-feedback" id="isdCodeId">+63</div>
                                                                                @Html.TextBoxFor(model => model.phoneNo, new { @class = "form-control", @type = "text", id = "phoneNo", @placeholder = "Phone Number", @required = "true", @minlength = "10", @maxlength = "10" })

                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <br />

                                                </div>



                                                <div class="col-md-12 clearfix">
                                                    <div class="btn-container space-top2x" style="float:right">
                                                        @*<button type="button" class="btn btn-cancel" id="cancelAddBenefiery">Cancel</button>*@

                                                        @Html.ActionLink("Cancel", "Benefeciaries", "Benefeciary", new { @class = "btn btn-cancel", @id = "cancelAddBenefiery" })
                                                        <button type="button" class="btn btn-success" id="continue">Continue</button>


                                                    </div>

                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- for payer selection  -->
                                </div>

                            </div>


                            @*------------------------------------------------------- B E N E F I C I A R Y      I N F O -----------------------------------------------*@




                            <!-- for payer selection  -->
                            <div id="beneinfoTwo" style="display:none">

                                <div class="divider hero-text-title--devider"></div>

                                <div class="payer-selection" id="cashPickUpScren" style="">

                                    <br />


                                    <div class="col-md-12 clearfix">
                                        <div class="row">
                                            <div class="col-xs-10">
                                                <h3>Beneficiary Information</h3>
                                            </div>
                                            <div class="col-xs-2">
                                                <button class="btn-link edit-btn pull-right" id="edit" type="button"><span class="edit-btn--icon"><span class="edit-btn--text">Edit</span></span></button>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="row">
                                        <div class="col-sm-1"><span></span></div>
                                        <div class="col-sm-11 col-xs-offset-1">
                                            <div class="beneficiary-information-icon">
                                                <div class="form-group clearfix">
                                                    <div class="col-sm-6">
                                                        <label for="">Name</label>
                                                        <p class="text-info wordwrap" id="beneficiaryName"></p>
                                                    </div>
                                                    <div class="col-sm-6">
                                                        <label for="">Phone</label>
                                                        <p class="text-info  wordwrap" id="beneficiaryCellPhone"></p>
                                                    </div>
                                                </div>
                                                <div class="form-group clearfix">
                                                    <div class="col-sm-6">
                                                        <label>Address </label>
                                                        <p class="text-info space-bottom0  wordwrap" id="beneficiaryAddress"></p>
                                                    </div>
                                                    
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                </div>
                                <div class="divider light-bg"></div>
                                <div class=" payer-information well-lg clearfix" id="payerinformation">

                                    <div class="col-md-12">
                                        <div class="btn-container" style="float:right">
                                            <button type="submit" class="btn btn-success">Finish</button>
                                        </div>
                                    </div>

                                </div>
                                <!-- for Account Credit end here  -->
                            </div>
                        </div>

                    </div>
                </div>
            </div>
        }
    </div>
</body>
</html>

<script>

    $(document).ready(function () {


        $('#continue').click(function () {

            var validate = $("#edit-receiver-form").has('.field-validation-no-valid');
            if ($("#edit-receiver-form").valid() && !(validate.length > 0)) {

                var name;
                if ($("#middleName").val() == "") {
                    name = $("#firstName").val() + " " + $("#lastName").val();
                } else {
                    name = $("#firstName").val() + " " + $("#middleName").val() + " " + $("#lastName").val();
                }
                var paymentcur = $("#paymentCurrency").val()
                var address = $("#street").val() + " " + $("#city").val() + " " + $("#zipcode").val();
                var phoneNo = "+63" + $("#phoneNo").val();


                $("#beneficiaryAddress").text(address);
                $("#beneficiaryCellPhone").text(phoneNo);
                $("#beneficiaryName").text(name);
      

                $("#beneinfoTwo").show();
                $("#beneinfoOne").hide();
            }

        });

        $('#edit').click(function () {
            $("#beneinfoTwo").hide();
            $("#beneinfoOne").show();
        });



        $('input#dateOfBirth').focusout(function (e) {
            var bDateVal = $(this).val();


            if (bDateVal[2] != '/' || bDateVal[5] != '/') {
                $(this).val('');
                $(this).focus();
                setError('dateOfBirth', 'Invalid date format');
                $(this).focus();
            }
            else if (bDateVal.length < 10 ||
                parseInt(bDateVal.slice(0, 2)) > 12 || //if month > 12
                parseInt(bDateVal.slice(3, 5)) < 01 || //if days < 01
                parseInt(bDateVal.slice(3, 5)) > 31    //if days > 31
               ) {
                setError('dateOfBirth', 'Invalid date format');
                $(this).focus();
            }
            else if (parseInt((new Date().getFullYear()) -
                     parseInt(bDateVal.slice(6))) < 18) {
                setError('dateOfBirth', 'You must be over 17 years old');
                $(this).focus();
            }
            else {
                unError('dateOfBirth');

            }
        });

        $('input#dateOfBirth').keydown(function (e) {

            var currentInput = $(this).val();
            if ((!isNumber(e) && !isBackSpace(e) && !isArrowKeys(e) && !isTab(e) && !isDelete(e) && !isSelectAll(e))
                || ((e.keyCode == 48 || e.keyCode == 96) && currentInput.length == 1 && currentInput[0] == '0')) {
                e.preventDefault();

            }
            else if ((currentInput.length == 2 || currentInput.length == 5) && !isBackSpace(e))
                $('input#dateOfBirth').val(currentInput + '/');
        });

        function setError(id, message) {
            var span = $("span[data-valmsg-for=\"" + id + "\"]");
            if (span && span.length > 0) {
                $(span).html(message);
                $(span).css("color", "red");
                if (message && message != "") {
                    $(span).removeClass("field-validation-valid");
                    $(span).addClass("field-validation-no-valid");
                } else {
                    $(span).removeClass("field-validation-no-valid");
                    $(span).addClass("field-validation-valid");
                }


            }
        }

        function unError(id) {
            var span = $("span[data-valmsg-for=\"" + id + "\"]");
            if (span && span.length > 0) {
                $(span).html();

                $(span).addClass("field-validation-valid");
                $(span).removeClass("field-validation-no-valid");

            }
        }



    });



</script>